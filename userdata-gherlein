useradd gherlein
usermod -G wheel gherlein
echo "gherlein:none" | chpasswd
usermod -a -G docker gherlein
sudo amazon-linux-extras enable corretto8
sudo yum install -y java-1.8.0-amazon-corretto
yum install -y emacs-nox
# change to allow sudo in the install scripts
echo "gherlein ALL=(ALL)       NOPASSWD: ALL" >> /etc/sudoers 
su -c 'cd ~gherlein;git clone https://github.com/gherlein/gch' gherlein
su -c 'cd ~gherlein/gch/;./install' gherlein
# change it back for safety later
sed -i.bak '/gherlein/d' /etc/sudoers
su -c 'echo "~/keychain/keychain --eval --agents ssh gherlein-ec2.pem >> ~/.bash_profile"' gherlein
su -c 'echo "ssh-add ~/keys/gherlein-ec2.pem >> ~/.bash_profile"' gherlein
# install go 1.18
wget https://go.dev/dl/go1.18.linux-amd64.tar.gz
su -c 'rm -rf /usr/local/go && tar -C /usr/local -xzf go1.18.linux-amd64.tar.gz'
# install docker
su -c 'sudo amazon-linux-extras install docker'
su -c 'sudo yum install docker'
su -c 'sudo service docker start && sudo systemctl enable docker'
su -c 'sudo usermod -a -G docker gherlein'

